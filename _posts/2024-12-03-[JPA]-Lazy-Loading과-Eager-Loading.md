---
layout: post
date: 2024-12-03
title: "[JPA] Lazy Loading과 Eager Loading"
tags: [JPA, ]
categories: [JPA, ]
---


### Lazy Loading이란?


Lazy Loading은 연관된 엔티티를 실제로 필요할 때만 조회하는 방식이다. 즉, 부모 엔티티를 먼저 조회하고, 자식 엔티티는 사용하는 시점에 추가적인 쿼리를 발생시켜 가져온다. 불필요한 데이터를 로딩하지 않기 때문에 메모리 사용이 줄어든다는 장점이 있으나 연관된 데이터를 가져올 때 개별적으로 쿼리를 실행하여 N+1 문제가 발생할 수 있다. 이말은 즉슨 사용자는 10명인데 각 사용자가 10개의 포스트를 등록했을 경우 각 사용자별로 포스트를 조회하는 쿼리를 10번 실행한다는 뜻이다. 


#### Eager Loading이란?


연관된 엔티티를 즉시 로딩하는 방식으로 부모 엔티티를 조회할 때 자식 엔티티도 즉시 함께 조회한다. 장점은 데이터를 한번에 가져올 수 있지만 필요하지 않은 데이터까지 로딩하기 때문에 메모리 사용량이 늘어나게 된다. 


#### 그렇다면 실무에서는 어떤식으로 사용을 할까?


실무에서는 기본적으로 Lazy Loading을 사용하고 필요한 경우에만 데이터를 로딩하는 방식을 사용한다. 그리고 N+1의 문제를 막기 위해 Fetch join 사용한다. JOIN FETCH를 사용해 한 번의 쿼리로 부모와 자식의 데이터를 모두 가져오나. 이를 통해 쿼리 성능을 최적화 할 수 있다. 

