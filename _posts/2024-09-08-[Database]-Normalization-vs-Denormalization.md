---
layout: post
date: 2024-09-08
title: "[Database] Normalization vs Denormalization"
tags: [Dabatabse, Normalization, ]
categories: [Database, ]
---


**정규화(Normalization)**는 **데이터 중복**을 최소화하고 **데이터 무결성**을 유지하기 위해 테이블을 효율적으로 설계하는 과정이다. 정규화는 데이터를 여러 단계로 나누어 관리하며, 각 단계는 **1NF, 2NF, 3NF**로 불립니다. 각 정규형은 데이터를 더 일관되게 관리하고 중복을 줄이는 역할을 한다.


#### **1. 제1정규형 (1NF: First Normal Form)**:

- **목표**: 각 열(컬럼)이 원자적(Atomic) 값을 가져야 함.
- **설명**: 한 테이블의 각 필드는 단일 값을 가져야 하며, 여러 값이 포함된 필드는 허용되지 않습니다. 즉, 한 컬럼에 여러 값이 들어가지 않도록 한다.
- **예시**: 만약 하나의 열에 여러 개의 전화번호가 있으면, 각각의 전화번호를 별도의 행이나 컬럼으로 나누어야 한다.

#### 예시 테이블 (비정규화된 상태):


| 사용자 ID | 이름   | 전화번호               |
| ------ | ---- | ------------------ |
| 1      | John | 123-4567, 234-5678 |


#### 1NF로 변환한 테이블:


| 사용자 ID | 이름   | 전화번호     |
| ------ | ---- | -------- |
| 1      | John | 123-4567 |
| 1      | John | 234-5678 |


---


#### **2. 제2정규형 (2NF: Second Normal Form)**:

- **목표**: **부분적 함수 종속성** 제거.
- **설명**: 테이블이 1NF를 만족하면서, **기본 키의 일부에만 의존하는 속성(컬럼)**이 없어야 한다. 즉, **기본 키에 완전히 종속적**이어야 한다. 2NF는 **복합 키**를 사용하는 테이블에서 중요하다.
- **조건**:
	1. 테이블이 1NF를 만족해야 함.
	2. 기본 키의 일부가 아닌 모든 컬럼이 **전체 기본 키**에 의존해야 함.

#### 예시 테이블 (1NF):


| 주문 ID | 고객 ID | 고객 이름 | 상품 ID | 상품 이름 |
| ----- | ----- | ----- | ----- | ----- |
| 1     | 100   | Alice | 200   | 책     |


#### 2NF로 변환한 테이블:


**주문 테이블**:


| 주문 ID | 고객 ID | 상품 ID |
| ----- | ----- | ----- |
| 1     | 100   | 200   |


**고객 테이블**:


| 고객 ID | 고객 이름 |
| ----- | ----- |
| 100   | Alice |


**상품 테이블**:


| 상품 ID | 상품 이름 |
| ----- | ----- |
| 200   | 책     |


---


#### **3. 제3정규형 (3NF: Third Normal Form)**:

- **목표**: **이행적 함수 종속성** 제거.
- **설명**: 2NF를 만족하면서, **기본 키가 아닌 다른 컬럼**에 **종속된 속성**이 없어야 한다. 즉, 기본 키 외의 컬럼이 또 다른 컬럼에 의존하지 않도록 테이블을 분리한다.
- **조건**:
	1. 테이블이 2NF를 만족해야 함.
	2. 기본 키에만 의존하는 컬럼만 남기고, 다른 컬럼끼리 의존하는 경우 이를 별도의 테이블로 분리해야 함.

#### 예시 테이블 (2NF):


| 고객 ID | 고객 이름 | 고객 도시 | 도시 우편번호 |
| ----- | ----- | ----- | ------- |
| 100   | Alice | 서울    | 12345   |


#### 3NF로 변환한 테이블:


**고객 테이블**:


| 고객 ID | 고객 이름 | 고객 도시 ID |
| ----- | ----- | -------- |
| 100   | Alice | 1        |


**도시 테이블**:


| 도시 ID | 도시 이름 | 우편번호  |
| ----- | ----- | ----- |
| 1     | 서울    | 12345 |


---


#### **정규화의 장점**:

- **데이터 중복 최소화**: 데이터가 여러 테이블에 나누어 저장되므로 중복이 최소화된다.
- **데이터 무결성 보장**: 각 데이터가 하나의 장소에서만 관리되므로, 변경 시 일관성을 유지할 수 있다.
- **저장 공간 절약**: 중복 데이터가 줄어들어 저장 공간을 효율적으로 사용할 수 있다.

#### **정규화의 단점**:

- **복잡한 쿼리**: 데이터를 여러 테이블에 나누기 때문에, JOIN을 많이 사용하게 되어 **쿼리 성능이 저하**될 수 있다.
- **성능 문제**: 대규모 읽기 작업이 많은 환경에서는 비정규화된 데이터 구조가 **성능 최적화**에 더 유리할 수 있다.
- **정규화(Normalization)**는 데이터의 중복을 최소화하면서도 무결성을 보장하는 강력한 설계 방법이지만, 성능 요구에 따라 **비정규화**도 고려해야 한다.
