---
layout: post
date: 2024-08-16
title: "[SystemDesign] Index Server"
tags: [SystemDesign, Architecture, Twitter Search, ]
categories: [SystemDesign, Basics, ]
---


### **1. 인덱스 서버(Index Server)란?**


**인덱스 서버**는 데이터베이스나 검색 시스템에서 데이터를 인덱싱하고, 그 인덱스를 기반으로 빠르게 검색 쿼리를 처리하는 서버이다. 인덱스 서버는 대규모 데이터 세트에서 효율적인 검색을 가능하게 하며, 데이터의 빠른 접근을 위해 인덱스를 생성하고 관리한다. 


#### **2. 인덱싱 주요 역할**

1. **데이터 인덱싱**: 데이터를 효율적으로 검색할 수 있도록 인덱스를 생성한다. 예를 들어, 문서, 트윗, 제품 정보 등과 같은 데이터를 분석하여 인덱스를 구축한다.
2. **검색 쿼리 처리**: 사용자로부터 검색 쿼리를 받아, 생성된 인덱스를 통해 관련 데이터를 빠르게 찾아 반환한다.
3. **데이터 관리**: 인덱스된 데이터를 저장하고 관리하며, 데이터를 분산하여 대규모 시스템에서 확장성을 제공한다.
4. **복제 및 내결함성 관리**: 데이터의 내결함성을 보장하기 위해 인덱스 복제본을 유지하고, 서버 장애 시에도 서비스 연속성을 유지한다.

#### **3. 인덱싱 생성 과정**

1. **데이터 수집 및 전처리**
	- **데이터 수집**: 데이터베이스나 외부 소스로부터 데이터를 수집한다. 수집된 데이터는 텍스트, 숫자, 메타데이터 등 다양한 형태일 수 있다.
	- **데이터 전처리**: 데이터를 인덱싱하기 전에, 텍스트 분석(토큰화, 불용어 제거), 데이터 정제, 필드 추출 등의 전처리 작업을 수행한다.
2. **인덱스 구조 정의**
	- **필드 선택**: 어떤 필드를 인덱싱할지 결정한다. 예를 들어, 문서의 제목, 본문, 작성자, 태그, 날짜 등이 인덱싱 대상이 될 수 있다.
	- **분석기 설정**: 텍스트 데이터의 경우, 특정 언어에 맞는 분석기를 설정하여 텍스트를 처리한다. 예를 들어, 영어 텍스트는 스템머와 함께 처리하고, 한글 텍스트는 형태소 분석기를 사용할 수 있다.
	- **역 인덱스 생성**: 검색 엔진은 데이터를 인덱싱할 때, 역 인덱스(Inverted Index)를 생성하여 키워드가 포함된 데이터의 위치를 기록한다. 이를 통해 빠르게 검색 결과를 반환할 수 있다.
3. **인덱싱 수행**
	- **데이터 인덱싱**: 전처리된 데이터를 기반으로 인덱스를 생성한다. 이 과정에서 각 데이터 항목의 인덱스가 검색 엔진에 저장된다.
	- **메타데이터 추가**: 인덱스에 메타데이터(예: 문서 ID, 작성 시간, 파일 경로 등)를 포함시켜 검색 결과의 정확성을 높인다.
4. **인덱스 배포 및 업데이트**
	- **인덱스 배포**: 생성된 인덱스는 검색 엔진 서버에 배포되어 검색 쿼리를 처리할 준비가 된다.
	- **인덱스 업데이트**: 새로운 데이터가 추가되거나 기존 데이터가 수정될 때, 인덱스를 업데이트한다. 이는 실시간 인덱싱, 배치 인덱싱, 또는 스트리밍 인덱싱 방식으로 이루어질 수 있다.

#### **4. 인덱싱 방법의 종류**

1. **실시간 인덱싱 (Real-time Indexing)**
	- **특징**: 데이터가 생성되거나 변경될 때 즉시 인덱스를 생성 및 업데이트.
	- **적용 예**: 트위터와 같은 실시간 소셜 미디어 플랫폼, 뉴스 웹사이트, 전자상거래 사이트.
	- **장점**: 최신 데이터를 실시간으로 검색할 수 있습니다.
	- **단점**: 시스템 부하가 증가할 수 있으며, 고빈도 데이터 생성 시 성능 저하 가능성.
2. **배치 인덱싱 (Batch Indexing)**
	- **특징**: 일정한 시간 간격 또는 트리거 이벤트가 발생할 때 데이터를 일괄적으로 인덱싱.
	- **적용 예**: 하루에 한 번 업데이트되는 문서 저장 시스템, 백엔드 데이터 분석 시스템.
	- **장점**: 대량의 데이터를 효율적으로 처리할 수 있으며, 시스템 부하를 관리하기 쉽다.
	- **단점**: 데이터 최신성이 떨어질 수 있습니다.
3. **스트리밍 인덱싱 (Streaming Indexing)**
	- **특징**: 지속적으로 발생하는 데이터 스트림을 실시간으로 처리하고 인덱싱.
	- **적용 예**: 대규모 소셜 미디어 플랫폼, 실시간 로그 분석 시스템.
	- **장점**: 대규모 데이터 스트림을 실시간으로 처리하며, 다양한 소비자에게 데이터를 동시에 제공할 수 있다.
	- **단점**: 설정과 운영이 복잡하며, 고성능 인프라가 필요하다.

#### **5. 인덱스 서버의 종류**

1. **단일 인덱스 서버 (Single Index Server)**:
	- 모든 데이터를 단일 서버에 인덱싱하고 저장한다. 소규모 시스템이나 단일 노드 환경에서 사용된다.
	- **장점**: 설정 및 관리가 간단하고, 데이터 동기화나 복제 문제를 고려하지 않아도 된다.
	- **단점**: 확장성 부족, 장애 발생 시 서비스 중단 가능성.
2. **분산 인덱스 서버 (Distributed Index Server)**:
	- 데이터를 여러 서버에 분산하여 인덱싱하고 저장한다. 대규모 시스템에서 일반적으로 사용된다.
	- **장점**: 고가용성, 확장성, 대규모 데이터 처리 능력.
	- **단점**: 설정 및 관리 복잡, 데이터 동기화와 복제 관리 필요.
3. **클러스터형 인덱스 서버 (Clustered Index Server)**:
	- 여러 인덱스 서버를 클러스터로 구성하여 데이터의 고가용성과 확장성을 높인다. 주로 분산 시스템에서 사용됩니다.
	- **장점**: 고가용성, 데이터 복제, 부하 분산.
	- **단점**: 높은 복잡도, 클러스터 관리 필요.

#### **6. 인덱싱의 최적화**

- **성능 최적화**: 인덱싱 과정에서 성능을 최적화하기 위해, 인덱스 구조를 효율적으로 설계하고, 불필요한 데이터를 배제하며, 검색 엔진의 캐싱 기능을 활용할 수 있다.
- **확장성 고려**: 서비스가 성장함에 따라 인덱싱 과정도 확장될 수 있도록, 분산 처리 및 클러스터링을 염두에 두고 설계한다.
- **내결함성 확보**: 인덱스 서버의 복제본을 유지하여 시스템 장애 시 신속하게 복구할 수 있도록 한다.

#### 7. 인덱스 서버 솔루션 종류


Elasticsearch, Apache Solr, Amazon CloudSearch, Microsoft Azure Cognitive Search, Sphinx

