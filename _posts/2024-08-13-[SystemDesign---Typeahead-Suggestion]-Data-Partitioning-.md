---
layout: post
date: 2024-08-13
title: "[SystemDesign - Typeahead Suggestion] Data Partitioning "
tags: [SystemDesign, Architecture, Typeahead Suggestion, ]
categories: [SystemDesign, Problems, Typeahead Suggestion, ]
---


### 1. **Range Based Partitioning**


문자열의 첫 번째 문자에 따라 데이터를 파티셔닝하는 방식이다. 예를 들어, 'A'로 시작하는 모든 데이터는 A 파티션에, 'B'로 시작하는 데이터는 B 파티션에 저장하는 식이지. 또한, 저장 빈도가 적은 문자열들은 하나의 파티션에 모두 저장할 수 있도록 조정할 수 있다.


**장점**:

- 이해하기 쉽고, 구현이 비교적 간단하다.
- 데이터를 쉽게 구분하고, 특정 범위의 데이터를 빠르게 검색할 수 있다.

**단점**:

- 특정 문자(예: 'A'나 'B')로 시작하는 데이터가 지나치게 많으면, 파티션 크기가 불균형해져서 일부 서버에 로드가 집중되는 문제가 발생할 수 있다.
- 데이터 분포가 균일하지 않으면 특정 파티션에 과부하가 걸릴 수 있다.

#### 2. **Based on the Maximum Capacity of the Server** 


하나의 서버에 데이터를 저장하다가 그 서버의 용량이 꽉 차면, 새로운 파티션을 생성하고 그 파티션을 다른 서버로 옮기는 방식이다. 예를 들어, Server 1에 'A-ABC'까지의 데이터를 저장하고, 'ABD'부터는 다른 서버에 저장한다. 이 경우, 데이터가 여러 서버에 분산되기 때문에 검색 시 각 서버에서 데이터를 가져와 통합하는 Aggregator가 필요하다.


**장점**:

- 각 서버의 용량을 최대한 활용할 수 있다.
- 서버의 용량이 꽉 차면 자동으로 새로운 서버를 추가하여 데이터를 분산시킬 수 있다.

**단점**:

- 데이터가 여러 서버에 분산되기 때문에 검색 시 모든 서버에서 데이터를 조회해야 하고, 이 과정에서 Aggregator의 역할이 중요해진다.
- 특정 시점에 서버의 용량이 한계에 도달하면, 데이터 이동이나 파티셔닝이 복잡해질 수 있다.

#### 3. **Based on the Hash of the Term**


각 용어를 해시 값으로 변환한 후, 이 해시 값을 기준으로 데이터를 서버에 나눠서 저장하는 방식이다. 모든 서버에서 데이터를 조회하고 Aggregator로 통합해야 한다는 단점이 있다.


**장점**:

- 해시를 사용하면 데이터가 서버에 고르게 분산되기 때문에, 로드가 균일하게 분배될 가능성이 높다.
- 특정 패턴에 의존하지 않고 데이터를 고르게 분산할 수 있다.

**단점**:

- 데이터 조회 시 모든 서버에서 데이터를 가져와야 하기 때문에, 응답 시간이 길어질 수 있다.
- Aggregator가 데이터를 통합하는 과정에서 병목 현상이 발생할 수 있다.
