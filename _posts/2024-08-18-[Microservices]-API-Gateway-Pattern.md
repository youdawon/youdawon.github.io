---
layout: post
date: 2024-08-18
title: "[Microservices] API Gateway Pattern"
tags: [Microservices, API Gateway, ]
categories: [Microservices, ]
---


**API Gateway 패턴**은 마이크로서비스 아키텍처에서 클라이언트와 마이크로서비스 간의 통신을 관리하는 단일 진입점이다. 클라이언트는 직접 각 마이크로서비스에 접근하지 않고, API Gateway를 통해 간접적으로 접근하게 된다. API Gateway는 여러 기능을 수행하며, 각 마이크로서비스와의 상호작용을 간소화한다.


#### API Gateway의 주요 기능

1. **요청 라우팅**:
	- 클라이언트로부터 받은 요청을 분석하고, 해당 요청을 처리할 적절한 마이크로서비스로 전달한다.
	- 라우팅은 요청 경로, HTTP 메서드, 헤더 정보를 기반으로 결정된다.
2. **로드 밸런싱**:
	- 요청을 여러 인스턴스에 분배하여 부하를 균등하게 나누는 역할을 한다. 이를 통해 성능을 최적화하고 서비스의 가용성을 높일 수 있다.
3. **인증 및 권한 부여**:
	- 사용자 인증과 권한 부여를 중앙에서 처리한다. 각 마이크로서비스에서 별도로 인증을 구현할 필요 없이, API Gateway에서 일관되게 관리한다.
4. **캐싱**:
	- 자주 사용되는 데이터나 응답을 캐싱하여, 반복적인 요청에 대한 응답 시간을 단축하고 시스템의 부하를 줄인다.
5. **요청 변환**:
	- 클라이언트 요청을 변환할 수 있다. 요청 데이터를 다양한 형식으로 변환하거나, 내부 마이크로서비스의 인터페이스에 맞게 수정할 수 있다.
6. **응답 집계**:
	- 여러 마이크로서비스에서 데이터를 받아 이를 하나의 응답으로 집계하여 클라이언트에게 반환한다. 클라이언트가 다수의 요청을 보내지 않고도 필요한 모든 정보를 한 번에 받을 수 있게 한다.
7. **보안**:
	- SSL/TLS 암호화를 통해 클라이언트와 서버 간의 통신을 보호한다. API 요청을 모니터링하고, 공격 패턴을 탐지하여 보안을 강화할 수 있다.

#### 장점

- **클라이언트 단순화**: 클라이언트는 여러 마이크로서비스의 세부 사항을 알 필요 없이, API Gateway를 통해 통신할 수 있다.
- **통합 관리**: 인증, 로깅, 모니터링, 보안 등의 기능을 중앙에서 관리할 수 있어, 마이크로서비스의 구현을 단순화하고 일관성을 유지할 수 있다.
- **유연성**: 클라이언트 요구에 따라 요청을 변환하거나 집계하여 맞춤형 응답을 제공할 수 있다.

#### 단점

- **복잡성 증가**: API Gateway는 시스템에 추가적인 복잡성을 더한다. 특히, API Gateway 자체의 장애가 전체 시스템에 영향을 미칠 수 있다.
- **단일 장애점**: API Gateway가 실패하면 모든 마이크로서비스와의 통신이 중단될 수 있으므로, 고가용성을 위해 추가적인 설계가 필요하다.
- **성능 병목**: 모든 요청이 API Gateway를 거쳐야 하므로, 성능 병목 지점이 될 수 있다.

**API Gateway 패턴**은 마이크로서비스 간의 복잡한 상호작용을 관리하고 단순화하는 데 중요한 역할을 하지만, 그에 따른 복잡성과 성능 문제를 함께 고려해야 한다.

