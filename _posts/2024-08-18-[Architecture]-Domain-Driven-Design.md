---
layout: post
date: 2024-08-18
title: "[Architecture] Domain Driven Design"
tags: [Architecture, Domain Driven Design, DDD, ]
categories: [Architecture, ]
---

- *도메인 주도 설계(DDD)**는 복잡한 소프트웨어 시스템을 설계하고 개발하는 데 있어, 비즈니스 도메인에 대한 깊은 이해를 바탕으로 시스템의 구조와 동작을 정의하는 접근 방법이다. DDD는 소프트웨어가 해결하려는 비즈니스 문제를 정확히 반영할 수 있도록, 개발자와 비즈니스 전문가 간의 협력을 통해 도메인 모델을 체계적으로 정의하고, 이를 바탕으로 시스템을 구축하는 것을 목표로 한다.

#### DDD의 주요 개념과 원칙


#### 1. **도메인(Domain)**

- **정의**: 도메인은 시스템이 해결하려는 특정 비즈니스 문제나 활동 영역을 말한다. 예를 들어, 전자상거래 시스템에서 도메인은 상품 관리, 주문 처리, 결제와 같은 비즈니스 영역을 포함한다.
- **중요성**: 도메인은 소프트웨어 개발의 출발점이며, 시스템이 제공해야 할 비즈니스 가치를 정의한다. 도메인을 명확히 정의하지 않으면, 시스템이 비즈니스 요구사항을 제대로 반영하지 못할 수 있다.

#### 2. **유비쿼터스 언어(Ubiquitous Language)**

- **정의**: 유비쿼터스 언어는 개발자와 비즈니스 전문가가 동일한 용어와 개념을 사용해 소통할 수 있도록 하는 공통된 언어다.
- **목적**: 이 언어는 도메인 모델을 정의하고 시스템을 설계하는 데 사용되며, 모든 이해관계자가 시스템의 동작과 구조를 동일한 관점에서 이해할 수 있도록 돕는다.
- **실천 방법**: 개발자는 비즈니스 전문가와의 협업을 통해 유비쿼터스 언어를 지속적으로 개선하고, 코드와 문서에서 일관되게 사용한다. 이를 통해 요구사항의 누락이나 오해를 줄일 수 있다.

#### 3. **도메인 모델(Domain Model)**

- **정의**: 도메인 모델은 비즈니스 도메인의 개념과 논리를 반영한 추상적인 모델이다. 도메인 모델은 시스템의 핵심 비즈니스 로직을 표현하며, 엔티티(Entity), 값 객체(Value Object), 애그리게잇(Aggregate) 등의 개념으로 구성된다.
- **중요성**: 도메인 모델은 소프트웨어 시스템이 비즈니스 문제를 해결하는 방식을 정의하며, 시스템의 설계와 구현의 중심이 된다.

#### 4. **바운디드 컨텍스트(Bounded Context)**

- **정의**: 바운디드 컨텍스트는 도메인 모델의 경계를 정의하는 개념으로, 각 바운디드 컨텍스트는 독립적인 도메인 모델을 가지며, 그 모델은 해당 컨텍스트 내에서 일관성을 유지한다.
- **역할**: 바운디드 컨텍스트는 시스템의 복잡성을 줄이고, 모델의 충돌을 방지하는 데 중요한 역할을 한다. 마이크로서비스 아키텍처에서 바운디드 컨텍스트는 마이크로서비스의 경계로 사용될 수 있다.
- **예시**: "주문 관리"와 "결제 처리"는 서로 다른 바운디드 컨텍스트로 구분될 수 있으며, 각 컨텍스트 내에서 독립적으로 도메인 모델이 관리된다.

#### 5. **엔티티(Entity)**

- **정의**: 엔티티는 고유한 식별자를 가진 객체로, 시스템 내에서 변화할 수 있는 상태를 가진다. 엔티티는 동일성을 기준으로 식별된다.
- **예시**: "고객"이나 "주문"은 엔티티로 표현될 수 있으며, 각각 고유한 식별자를 통해 구별된다. 예를 들어, 고객은 고객 ID로 식별될 수 있다.

#### 6. **값 객체(Value Object)**

- **정의**: 값 객체는 식별자가 없으며, 값 자체로 동일성을 판단하는 객체다. 값 객체는 불변성을 가지며, 동일한 값을 가지면 동일한 객체로 간주된다.
- **예시**: "화폐 금액"이나 "주소"는 값 객체로 표현될 수 있다. 예를 들어, 동일한 금액의 돈은 같은 값 객체로 취급된다.

#### 7. **애그리게잇(Aggregate)**

- **정의**: 애그리게잇은 서로 관련된 엔티티와 값 객체를 그룹화한 집합이다. 애그리게잇은 내부 일관성을 유지하며, 외부에서는 애그리게잇 루트(Aggregate Root)를 통해서만 접근할 수 있다.
- **역할**: 애그리게잇은 데이터의 일관성을 유지하고, 시스템의 무결성을 보호하는 데 중요한 역할을 한다. 예를 들어, "주문 애그리게잇"은 주문, 주문 항목, 배송 정보 등을 포함할 수 있으며, 이 모든 요소는 주문 애그리게잇 루트를 통해 관리된다.

#### 8. **도메인 이벤트(Domain Event)**

- **정의**: 도메인 이벤트는 도메인 내에서 발생한 중요한 사건을 나타낸다. 도메인 이벤트는 시스템의 상태 변화를 다른 컴포넌트나 서비스에 알리는 역할을 한다.
- **역할**: 도메인 이벤트를 통해 시스템은 상태 변화나 비즈니스 로직의 흐름을 추적할 수 있다. 예를 들어, "주문이 완료됨"이라는 도메인 이벤트가 발생하면, 이를 기반으로 재고를 조정하거나, 고객에게 알림을 보낼 수 있다.

#### 9. **리포지토리(Repository)**

- **정의**: 리포지토리는 도메인 객체를 저장하고 검색하는 인터페이스를 제공한다. 리포지토리는 데이터베이스와 도메인 모델 간의 매핑을 관리하며, 애그리게잇을 저장하고 조회하는 역할을 한다.
- **역할**: 리포지토리는 도메인 모델이 데이터 저장소에 대한 직접적인 의존성을 제거하고, 비즈니스 로직에 집중할 수 있도록 돕는다. 이를 통해 도메인 모델의 복잡성을 줄이고, 데이터 액세스 로직을 일관성 있게 관리할 수 있다.

#### DDD의 장점

1. **비즈니스 중심 설계**:
	- DDD는 비즈니스 도메인을 중심으로 시스템을 설계하기 때문에, 시스템이 비즈니스 요구사항을 정확히 반영할 수 있다. 이를 통해 소프트웨어가 비즈니스 가치를 높이는 데 집중할 수 있다.
2. **복잡성 관리**:
	- DDD는 복잡한 비즈니스 도메인을 바운디드 컨텍스트로 나누어 관리함으로써, 시스템의 복잡성을 줄이고 유지보수성을 높일 수 있다. 각 바운디드 컨텍스트는 독립적인 도메인 모델을 가지므로, 변경이 필요한 부분만 수정할 수 있다.
3. **유연성**:
	- DDD는 도메인 모델이 비즈니스 변화에 맞춰 유연하게 수정될 수 있도록 설계되기 때문에, 변화하는 요구사항에 쉽게 대응할 수 있다. 또한, 도메인 이벤트를 통해 시스템의 상태 변화를 추적하고 비즈니스 로직을 확장할 수 있다.
4. **효과적인 소통**:
	- 유비쿼터스 언어를 통해 개발자와 비즈니스 전문가 간의 소통이 원활해진다. 이를 통해 요구사항을 명확히 이해하고, 시스템이 비즈니스 목표를 잘 반영하도록 설계할 수 있다.

#### DDD의 단점

1. **초기 학습 곡선**:
	- DDD는 개념이 많고 복잡하기 때문에, 팀이 이를 효과적으로 활용하기 위해서는 학습이 필요하다. 특히, DDD를 처음 도입하는 팀이나 작은 프로젝트에서는 이를 적용하는 데 시간이 걸릴 수 있다.
2. **높은 초기 비용**:
	- 도메인 모델링과 바운디드 컨텍스트 설정 같은 초기 설계 작업에 많은 시간과 노력이 필요하다. 이는 프로젝트 초기 단계에서 높은 비용을 초래할 수 있다.
3. **복잡한 도메인에 적합**:
	- DDD는 복잡한 비즈니스 도메인을 가진 대규모 시스템에 적합하지만, 단순한 시스템이나 작은 프로젝트에서는 과도한 접근이 될 수 있다. 이런 경우에는 더 간단한 설계 방법론을 사용하는 것이 더 효율적일 수 있다.

#### DDD의 적용 예시

1. **전자상거래 시스템**:
	- 전자상거래 시스템에서는 상품 관리, 주문 처리, 결제 등의 도메인이 존재한다. 각 도메인은 별도의 바운디드 컨텍스트로 나누어 관리할 수 있다. 예를 들어, "주문 관리"는 주문 애그리게잇을 통해 주문의 상태와 관련된 모든 데이터를 일관성 있게 관리할 수 있다.
2. **금융 시스템**:
	- 금융 시스템에서는 계좌 관리, 거래 처리, 리스크 관리 등의 복잡한 도메인이 있다. DDD를 사용하여 각 도메인을 명확히 구분하고, 독립적인 도메인 모델을 통해 비즈니스 로직을 구현할 수 있다. 예를 들어, "계좌 관리" 도메인은 계좌 엔티티와 거래 애그리게잇을 사용해 계좌의 상태를 추적하고 관리할 수 있다.
